# Dativo Talon Agent Configuration
# Agent Type: {{ .Name }}
# Schema: .talon.yaml v2.0
#
# Review these settings before deploying to production.
# Run 'talon validate --strict' to verify compliance requirements.

agent:
  name: {{ .Name }}
  description: AI agent with policy enforcement
  version: 1.0.0
  model_tier: 1

capabilities:
  allowed_tools:
    - sql_query
    - file_read

  forbidden_patterns:
    - ".env"
    - "secrets"
    - "credentials"

policies:
  cost_limits:
    per_request: 5.0
    daily: 200.0
    monthly: 3000.0

  resource_limits:
    timeout:
      operation: "60s"
      tool_execution: "5m"
      agent_total: "30m"

  rate_limits:
    requests_per_minute: 30
    concurrent_executions: 1

  data_classification:
    input_scan: true
    output_scan: true
    redact_pii: false
    # Optional: restrict which PII types this agent scans for (Presidio entity names).
    # enabled_entities: ["EMAIL_ADDRESS", "IBAN_CODE", "CREDIT_CARD"]  # whitelist
    # disabled_entities: ["IP_ADDRESS"]                                 # blacklist
    # custom_recognizers:                                              # agent-specific patterns
    #   - name: "Internal ID"
    #     supported_entity: "EMPLOYEE_ID"
    #     patterns:
    #       - name: "emp id"
    #         regex: '\bEMP-\d{6}\b'
    #         score: 0.95
    #     sensitivity: 2

  model_routing:
    tier_0:
      primary: gpt-4o-mini
      location: any
    tier_1:
      primary: gpt-4o
      fallback: gpt-4o-mini
      location: eu-west-1
    # tier_2 is used for PII-bearing inputs. If you don't use AWS Bedrock, set bedrock_only: false
    # and primary/fallback to OpenAI or Anthropic models (e.g. gpt-4o, gpt-4o-mini).
    tier_2:
      primary: claude-sonnet-4-20250514
      location: eu-west-1
      bedrock_only: true

audit:
  log_level: detailed
  retention_days: 2555
  include_prompts: false
  include_responses: false

compliance:
  frameworks:
    - gdpr
    - eu-ai-act
  data_residency: eu

# Agent memory is off by default. Uncomment and set enabled: true to allow governed learning (see MEMORY_GOVERNANCE.md).
# memory:
#   enabled: true
#   mode: active
#   max_entries: 100
#   max_entry_size_kb: 16
#   retention_days: 90

metadata:
  department: engineering
  owner: "{{ .Owner }}"
  tags:
    - ai-agent
    - governed
